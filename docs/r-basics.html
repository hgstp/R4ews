<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Kapitel 2 R Basics und Arbeitsabl√§ufe | R4ews MA0009</title>
<meta name="author" content="Stephan Haug">
<meta name="description" content="2.1 Ein paar Grundlagen f√ºr das Arbeiten mit R  Aktueller Stand: Ihr habt bereits den Basics Primer absolviert und nun wollt ihr anfangen mit eurer RStudio/R Installation zu arbeiten. Es geht los...">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="Kapitel 2 R Basics und Arbeitsabl√§ufe | R4ews MA0009">
<meta property="og:type" content="book">
<meta property="og:description" content="2.1 Ein paar Grundlagen f√ºr das Arbeiten mit R  Aktueller Stand: Ihr habt bereits den Basics Primer absolviert und nun wollt ihr anfangen mit eurer RStudio/R Installation zu arbeiten. Es geht los...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kapitel 2 R Basics und Arbeitsabl√§ufe | R4ews MA0009">
<meta name="twitter:description" content="2.1 Ein paar Grundlagen f√ºr das Arbeiten mit R  Aktueller Stand: Ihr habt bereits den Basics Primer absolviert und nun wollt ihr anfangen mit eurer RStudio/R Installation zu arbeiten. Es geht los...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Lato-0.4.2/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/font-awesome-5.1.0/css/all.css" rel="stylesheet">
<link href="libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet">
<script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="anchor-links.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-68219208-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-68219208-1');
      </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="r4ews.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R4ews MA0009</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">R4ews</a></li>
<li class="book-part">R, wie fange ich an</li>
<li><a class="" href="install.html"><span class="header-section-number">1</span> Installieren von R und RStudio</a></li>
<li><a class="active" href="r-basics.html"><span class="header-section-number">2</span> R Basics und Arbeitsabl√§ufe</a></li>
<li class="book-part">Versionskontrolle und R Markdown</li>
<li><a class="" href="version-control.html"><span class="header-section-number">3</span> Git, GitHub, and RStudio</a></li>
<li><a class="" href="r-markdown.html"><span class="header-section-number">4</span> R Markdown</a></li>
<li class="book-part">Datenanalyse Intro</li>
<li><a class="" href="basic-data-care.html"><span class="header-section-number">5</span> Letzte Vorbereitungen ‚Ä¶</a></li>
<li><a class="" href="dplyr-intro.html"><span class="header-section-number">6</span> Einf√ºhrung in dplyr</a></li>
<li><a class="" href="dplyr-single.html"><span class="header-section-number">7</span> Mehr zu dplyr</a></li>
<li><a class="" href="import-export.html"><span class="header-section-number">8</span> Daten I/O</a></li>
<li><a class="" href="tidy.html"><span class="header-section-number">9</span> tidy was?</a></li>
<li class="book-part">ggplot2 Intro</li>
<li><a class="" href="graphics-overview.html"><span class="header-section-number">10</span> Einf√ºhrung</a></li>
<li><a class="" href="bausteine.html"><span class="header-section-number">11</span> Bausteine</a></li>
<li class="book-part">Ein bisschen Statistik</li>
<li><a class="" href="sampling.html"><span class="header-section-number">12</span> Sampling</a></li>
<li class="book-part">Wir schreiben ein Paket</li>
<li><a class="" href="pakete.html"><span class="header-section-number">13</span> Pakete</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="funktionen.html"><span class="header-section-number">14</span> Funktionen</a></li>
<li><a class="" href="envscop.html"><span class="header-section-number">15</span> Environments und Scoping</a></li>
<li><a class="" href="literatur-3.html">Literatur</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="r-basics" class="section level1" number="2">
<h1>
<span class="header-section-number">Kapitel 2</span> R Basics und Arbeitsabl√§ufe<a class="anchor" aria-label="anchor" href="#r-basics"><i class="fas fa-link"></i></a>
</h1>
<div id="ein-paar-grundlagen-f√ºr-das-arbeiten-mit-r" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Ein paar Grundlagen f√ºr das Arbeiten mit R<a class="anchor" aria-label="anchor" href="#ein-paar-grundlagen-f%C3%BCr-das-arbeiten-mit-r"><i class="fas fa-link"></i></a>
</h2>
<div class="rmdnote">
<p><strong>Aktueller Stand:</strong> Ihr habt bereits den Basics Primer absolviert und nun wollt ihr anfangen mit eurer RStudio/R Installation zu arbeiten.</p>
</div>
<p>Es geht los indem ihr RStudio startet. Beachtet dabei die Standardfensterbereiche:</p>
<ul>
<li>Console (<em>links</em>)</li>
<li>Environment / History (<em>oben rechts</em>)</li>
<li>Files / Plots / Packages / Help (<em>unten rechtes</em>)</li>
</ul>
<p><strong>Bemerkung:</strong> Die Standardanordnung der Fenster k√∂nnt ihr neben vielen anderen Dingen nach deinen Vorstellungen √§ndern/anpassen: <a href="https://support.rstudio.com/hc/en-us/articles/200549016-Customizing-RStudio">Customizing RStudio</a>.</p>
<p>Geht nun in die Konsole um mit R zu interagieren. Erstellt die nachfolgende Zuordnung und schau euch das erstellte Objekt genauer an:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="op">*</span> <span class="fl">4</span>
<span class="va">x</span>
<span class="co">## [1] 12</span></code></pre></div>
<p>Alle R Befehle, die ein Objekte erstellen (‚ÄúZuweisungen‚Äù), haben die Form:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">objectName</span> <span class="op">&lt;-</span> <span class="va">value</span></code></pre></div>
<p>Ihr werdet im weiteren Verlauf noch viele Zuweisungen vornehmen. Tats√§chlich ist es etwas m√ºhsam den Operator <code>&lt;-</code> zu tippen. Seid aber trotzdem nicht faul und benutzt stattdessen einfach <code>=</code> - auch wenn das theoretisch funktionieren w√ºrde. Aber sp√§ter kann die Verwendung von <code>=</code> f√ºr Zuweisungen zu Verwirrung f√ºhren. Verwendet stattdessen in RStudio die Tastenkombination: <code>Alt</code> + <code>-</code> (Minuszeichen) bzw. <code>option</code> + <code>-</code>.</p>
<p>Beachtet, dass RStudio automatisch <code>&lt;-</code> mit Leerzeichen umgibt, was eine n√ºtzliche Codeformatierung darstellt. Code ist selbst an einem guten Tag eher schlecht zu lesen. G√∂nnt daher euren Augen eine Pause und verwende (ausreichend) Leerzeichen.</p>
<p>RStudio bietet viele praktische <a href="https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts">Tastaturk√ºrzel</a> an. Eine √úbersicht erh√§lt man auch mit <code>Alt</code>+<code>Shift</code>+<code>K</code> bzw. <code>option</code>+<code>Shift</code>+<code>K</code>.</p>
<p>Objektnamen d√ºrfen nicht mit einer Ziffer beginnen und bestimmte andere Zeichen wie ein Komma oder ein Leerzeichen nicht enthalten. Es ist daher ratsam, sich eine <a href="https://en.wikipedia.org/wiki/Snake_case">Konvention zur Abgrenzung von W√∂rtern</a> in Objektnamen zu √ºberlegen.</p>
<pre><code>i_use_snake_case
other.people.use.periods
evenOthersUseCamelCase</code></pre>
<p>Wir werden stets die erste Variante verwenden.</p>
<p>F√ºhrt nun nachfolgenden Befehl aus</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">this_is_a_really_long_name</span> <span class="op">&lt;-</span> <span class="fl">2.5</span></code></pre></div>
<p>In eurem Workspace ist nun das Objekt <code>this_is_a_really_long_name</code> vorhanden. Probiert mithilfe dieses Objekts die Vervollst√§ndigungsfunktion von RStudio aus:</p>
<div class="content-box-grey">
<p>Gib die ersten paar Zeichen ein, dr√ºcke anschlie√üend die TAB Taste, f√ºgen weitere Zeichen hinzu, bis Eindeutigkeit hergestellt ist(wenn sonst wenig in deinem Workspace ist, dann ist das schnell erreicht), und dr√ºcke dann die Eingabetaste.</p>
</div>
<p>F√ºhrt nun den Befehl</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">zwei_hoch_drei</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">^</span> <span class="fl">3</span></code></pre></div>
<p>aus, um anschlie√üend den Inhalt des Objekts anzuzeigen.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">zwei.hoch.drei</span>
<span class="co">## Error in eval(expr, envir, enclos): object 'zwei.hoch.drei' not found</span>
<span class="va">zwei_Hoch_drei</span>
<span class="co">## Error in eval(expr, envir, enclos): object 'zwei_Hoch_drei' not found</span></code></pre></div>
<p>Die Objekte <code>zwei.hoch.drei</code> und <code>zwei_Hoch_drei</code> sind nat√ºrlich nicht vorhanden und somit f√ºhren beide Befehle zu einer Fehlermeldung. Man muss also absolut exakt sein mit seinen Befehlen.</p>
<p>R verf√ºgt √ºber eine √ºberw√§ltigende Sammlung eingebauter Funktionen, die nach folgendem Schema aufgerufen werden:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">functionName</span><span class="op">(</span>arg1 <span class="op">=</span> <span class="va">val1</span>, arg2 <span class="op">=</span> <span class="va">val2</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
<p>Als n√§chstes wollen wir die Funktion <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code> verwenden, die regul√§re Zahlensequenzen erzeugt. Dabei wollen wir noch ein weiteres hilfreiches Feature von RStudio demonstrieren.</p>
<div class="content-box-grey">
<p>Tippt <code>se</code> und dr√ºcke dann die TAB Taste. In einem Pop-Up Fenster werden dir m√∂gliche Vervollst√§ndigungen angezeigt. Der Befehl <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code> kann dann durch weiteres Tippen oder √ºber die Auswahlm√∂glichkeit (Pfeiltasten nach oben/unten) festgelegt werden. Zu jeder Auswahlm√∂glichkeit wird auch noch eine Kurzform der entsprechenden Hilfeseite angezeigt.</p>
</div>
<p>F√ºgt man jetzt die √∂ffnende runde Klammer hinzu, so wird die zugeh√∂rige schlie√üende runde Klammer automatisch hinzugef√ºgt. Tippe anschlie√üend <code>1, 10</code> (das geschieht automatisch innerhalb der runden Klammern) und Return. RStudio beendet auch den Klammerausdruck f√ºr dich. RStudio üöÄ</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>
<span class="co">##  [1]  1  2  3  4  5  6  7  8  9 10</span></code></pre></div>
<p>Der letzte Befehl zeigt auch ganz gut, wie R Funktionsargumente aufl√∂st. Sie k√∂nnen immer in der Form <code>Name = Wert</code> angeben werden. Aber der Name muss nicht angegeben werden, wie man sieht. In solchen F√§llen versucht R, nach der Position aufzul√∂sen. So wird oben angenommen, dass wir eine Sequenz bei 1 starten wollen, also <code>from = 1</code>, und diese bis 10 laufen soll, daher <code>to = 10</code>. Da wir keine Schrittweite angegeben haben, wird der Standardwert f√ºr <code>by</code> verwendet, der in diesem Fall gleich 1 ist.</p>
<p>Bei Funktionen, die man oft aufruft, kann man gut diese Aufl√∂sung nach Position f√ºr das erste und vielleicht auch das zweite Argument verwenden. Danach ist es aber ratsam immer mit <code>Name = Wert</code> zu arbeiten um falsche Zuweisungen (verschiedene Argumente k√∂nnen vom gleichen Typ sein, sodass eine falsche Zuweisung nicht automatisch zu einer Fehlermeldung f√ºhrt) zu vermeiden.</p>
<p>Analog zur Unterst√ºtzung mit den runden Klammern, werden auch schlie√üende Anf√ºhrungszeichen automatisch erg√§nzt, wie man in folgendem Beispiel sieht.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">yo</span> <span class="op">&lt;-</span> <span class="st">"hello world"</span></code></pre></div>
<p>Nach einer Zuweisung wird der entsprechende Wert des Objekts nicht angezeigt. Daher ist man vielleicht dazu geneigt das Objekt gleich erneut aufzurufen</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>
<span class="va">y</span>
<span class="co">##  [1]  1  2  3  4  5  6  7  8  9 10</span></code></pre></div>
<p>Diese typische Aktion kann verk√ºrzt werden, indem die Zuweisung in Klammern gesetzt wird, wodurch die Zuweisung und ein Befehl ‚ÄúDrucke auf den Bildschirm‚Äù erfolgen.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="co">##  [1]  1  2  3  4  5  6  7  8  9 10</span></code></pre></div>
<p>Nicht alle Funktionen haben (oder erfordern) Argumente:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/date.html">date</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">## [1] "Thu Oct 27 09:48:23 2022"</span></code></pre></div>
<p>Schaut euch nun euren Workspace an - unter Environment (vermutlich im Fenster rechts oben) seht ihr den Inhalt eures Workspace. Der Workspace ist der Ort, an dem sich benutzerdefinierte Objekte ansammeln. Eine Liste dieser Objekte k√∂nnt ihr auch mit diesen Befehlen erhalten:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/ls.html">objects</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">## [1] "this_is_a_really_long_name" "x"                         </span>
<span class="co">## [3] "y"                          "yo"                        </span>
<span class="co">## [5] "zwei_hoch_drei"</span>
<span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">## [1] "this_is_a_really_long_name" "x"                         </span>
<span class="co">## [3] "y"                          "yo"                        </span>
<span class="co">## [5] "zwei_hoch_drei"</span></code></pre></div>
<p>Wenn ihr nun das Objekt mit dem Namen <code>y</code> entfernen m√∂chtet, k√∂nnt ihr das wie folgt machen:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></code></pre></div>
<p>Alles l√∂schen kann man mit dem Befehl</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>oder man klickt auf den Besen im Environment Fenster von RStudio.</p>
</div>
<div id="workspace-und-working-directory" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Workspace und working directory<a class="anchor" aria-label="anchor" href="#workspace-und-working-directory"><i class="fas fa-link"></i></a>
</h2>
<p>Ziemlich schnell wird der Fall eintreten, dass ihr mit eurer R Arbeit (z.B. Bearbeitung eines Hausaufgaben Projekts) noch nicht fertig seid obwohl es Zeit die Arbeit f√ºr heute zu beenden. Nat√ºrlich will man aber zu einem sp√§teren Zeitpunkt mit der Analyse weitermachen, wo man gerade aufgeh√∂rt hat.</p>
<p>Etwas sp√§ter wird es so ein, dass ihr zudem auch noch Daten in R einlest und damit anschlie√üend numerische Ergebnisse erzeugt, die ihr dann auch wieder exportieren wollt.</p>
<p>Und nochmal sp√§ter wird es (vielleicht) so sein, dass ihr in R gleichzeitig an mehreren Analysen arbeitest, die ihr aber unbedingt getrennt halten wollt/sollt.</p>
<p>Um diese Situationen zu bew√§ltigen, m√ºsst ihr zwei Entscheidungen treffen:</p>
<ul>
<li><p>Was betrachtest du an deiner Analyse als <strong>‚ÄúErgebnis‚Äù</strong>, d.h. was wirst du dauerhaft speichern?</p></li>
<li><p>Wo <strong>‚Äúlebt‚Äù</strong> deine Analyse?</p></li>
</ul>
<div id="workspace-.rdata" class="section level3" number="2.2.1">
<h3>
<span class="header-section-number">2.2.1</span> Workspace, <code>.RData</code><a class="anchor" aria-label="anchor" href="#workspace-.rdata"><i class="fas fa-link"></i></a>
</h3>
<p>Ihr startet gerade eure R Reise ‚úàÔ∏è. Daher w√§re es okay, wenn ihr euren Workspace als das <strong>‚ÄúErgebnis‚Äù</strong> eurer Analyse betrachtet. <em>Ziemlich bald</em>, solltet ihr aber davon (vielleicht durch uns) √ºberzeugt sein, dass eure R Skripte das Ergebnis eurer Analyse sind (in beiden F√§llen h√§ngt das Ergebnis vermutlich auch von Input Daten ab).</p>
<p>Die Daten zusammen mit eurem R Code erlauben es euch jederzeit <em>alle</em> Ergebnisse zu <strong>reproduzieren</strong> und das ist die entscheidende Eigenschaft.</p>
<p>Betrachtest man seinen Workspace als das Ergebnis der Analyse, dann muss man bei einem erneuten Analysedurchlauf (leicht ver√§nderte Aufgabenstellung, ‚Ä¶) entweder erneut eine Menge Tippen (was nat√ºrlich fehleranf√§llig ist) oder die R <em>History</em> nach den n√∂tigen Befehlen durchw√ºhlen.
Statt <a href="https://support.rstudio.com/hc/en-us/articles/200526217-Command-History">‚Äúbecoming an expert on managing the R history‚Äù</a> als Ziel zu haben, solltet ihr euren R Code sauber in ein Skript speichern, sodass er f√ºr weitere Analysen zur Verf√ºgung steht.</p>
<p>Der Workspace Ansatz wird allerdings ‚Äúbeg√ºnstigt/gef√∂rdert‚Äù durch die Tatsache, dass RStudio beim Beenden der Session automatisch wissen will ob der Workspace gespeichert werden soll. Das wollen wir mal ausprobieren.</p>
<p>Beendet R/RStudio, entweder √ºber das Men√º oder tippt <code><a href="https://rdrr.io/r/base/quit.html">q()</a></code> in die Konsole. Dann erhaltet ihr eine Eingabeaufforderung wie diese:</p>
<blockquote>
<p>Save workspace image to ~/.Rdata?</p>
</blockquote>
<p><em>Merkt euch in welchem Verzeichnis die Datei gespeichert wird</em> und dann klickt auf <code>Save</code>.</p>
<p>Geht in das Verzeichnis mit dem gespeicherten Workspace Image und kontrolliert ob die Datei <code>.RData</code> vorhanden ist. Ihr werdet dort auch die Datei <code>.Rhistory</code> finden, die alle Befehle eurer letzten Sitzung enth√§lt.</p>
<p>Nun starte erneut RStudio. In der Konsole seht ihr einen Befehl, der ungef√§hr so aussieht</p>
<pre><code>[Workspace loaded from ~/.RData]</code></pre>
<p>und angibt, dass euer gespeicherter Workspace wiederhergestellt wurde. Unter Environment solltet ihr die gleichen Objekte wie zuvor sehen. Im Fenster History findet ihr die gespeicherten Befehle aus der letzten Sitzung.</p>
<p>Aber diese Art, analytische Arbeit zu beginnen und zu beenden, w√ºrde so nicht lange gut gehen. Daher fangen wir gleich mal damit an die automatische Nachfrage nach dem Speichern des Workspaces abzuw√§hlen. √ñffnet dazu die Global Options (unter Tools)</p>
<div class="inline-figure"><img src="img/global_options.png" width="80%" style="display: block; margin: auto;"></div>
<p>und setzt <code>Save workspace to .RData on exit</code> auf <code>Never</code>. Nun werdet ihr <strong>nie mehr</strong> gefragt ob der Workspace gespeichert werden soll. Sehr wohl werdet ihr aber weiterhin gefragt ob ungesicherte √Ñnderungen in euren R Skript gespeichert werden sollen, sobald ihr RStudio beenden wollt.</p>
</div>
<div id="working-directory" class="section level3" number="2.2.2">
<h3>
<span class="header-section-number">2.2.2</span> Working directory<a class="anchor" aria-label="anchor" href="#working-directory"><i class="fas fa-link"></i></a>
</h3>
<p>Jeder Prozess, der auf einem Computer l√§uft, hat einen Bezug zu seinem ‚ÄúArbeitsverzeichnis‚Äù. In R ist dies der Ort, an dem R standardm√§√üig nach Dateien suchen w√ºrde oder der Ort wo alle Dateien, die ihr auf die Festplatte schreiben wollt, abgelegt werden. M√∂glicherweise ist euer aktuelles Arbeitsverzeichnis das Verzeichnis, das ihr gerade untersucht habt um die <code>.RData</code> Datei zu finden.</p>
<p>Das aktuelle Arbeitsverzeichnis k√∂nnt ihr euch anzeigen lassen mit dem Befehl</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Aber es wird auch oben an der RStudio Konsole direkt angezeigt.</p>
<p>Es w√§re schon, wenn das Arbeitsverzeichnis in Abh√§ngigkeit vom jeweils zu bearbeitenden Projekt leicht sinnvoll gesetzt werden k√∂nnte. Im n√§chsten Abschnitt sehen wir, dass genau das m√∂glich ist.</p>
</div>
</div>
<div id="rprojs" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> RStudio Projects<a class="anchor" aria-label="anchor" href="#rprojs"><i class="fas fa-link"></i></a>
</h2>
<p>Alle zu einem Projekt geh√∂renden Dateien - Eingabedaten, R Skripte, Analyseergebnisse, Grafiken - an einem Ort zu b√ºndeln, ist eine so sinnvolle Praxis, dass RStudio √ºber seine <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects"><strong>Projects</strong></a> genau da erm√∂glicht.</p>
<p>Lasst uns ein Projekt f√ºr den Kurs anlegen. Dazu w√§hlen wir oben rechts im RStudio Fenster <code>Project: (None) -&gt; New Project</code></p>
<div class="inline-figure"><img src="img/project_1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Danach w√§hlen wir <code>New Directory -&gt; New Project</code> und geben abschlie√üend einen passenden Verzeichnisnamen ein (dabei beachten wir den Speicherort des neuen Verzeichnisses)</p>
<p><img src="img/project_2.png" width="33%"><img src="img/project_3.png" width="33%"><img src="img/project_4.png" width="33%"></p>
<p>Wir nehmen nun an, dass ihr ein RStudio Projekt angelegt und auch ge√∂ffnet habt. Als N√§chstes ben√∂tigen wir nun ein wenig R Code. Dazu tippen wir den unten stehenden Code (ausnahmsweise) in die Konsole</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">2</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">3</span>
<span class="va">sig_sq</span> <span class="op">&lt;-</span> <span class="fl">0.5</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="va">b</span> <span class="op">*</span> <span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">40</span>, sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">sig_sq</span><span class="op">)</span><span class="op">)</span>
<span class="op">(</span><span class="va">x_n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
<span class="co">## [1] 0.531</span>
<span class="fu"><a href="https://rdrr.io/r/base/write.html">write</a></span><span class="op">(</span><span class="va">x_n</span>, <span class="st">"mittelwert_x.txt"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span>, col <span class="op">=</span> <span class="st">"purple"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="02_r-basics_files/figure-html/toy-line-1.png" width="80%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/grDevices/dev2.html">dev.print</a></span><span class="op">(</span><span class="va">pdf</span>, <span class="st">"scatterplot.pdf"</span><span class="op">)</span>
<span class="co">## quartz_off_screen </span>
<span class="co">##                 2</span></code></pre></div>
<p>Jetzt nehmen wir mal an, das w√§re ein guter Start einer Analyse, die wir durchf√ºhren wollen. Daher w√ºrdest ihr das Ergebnis gerne abspeichern. Unter History k√∂nnt ihr alle obigen Befehle markieren und anschlie√üend <code>To Source</code> klicken. Daraufhin wird sich ein neues Fenster mit einem R Skript - das nat√ºrlich die Befehle enth√§lt - √∂ffnen. Das Skript k√∂nnt ihn anschlie√üend abspeichern, und standardm√§√üig wird es in den Projektordner gespeichert werden (aber nat√ºrlich k√∂nntest man den Speicherort an dieser Stelle auch √§ndern/frei w√§hlen).</p>
<p>Nun beendet das Projekt (<em>Close Project</em> in der rechten oberen Ecke). Wer will, kann sich noch den Inhalt dess Projektordners anschauen, z.B. das PDF √∂ffnen.</p>
<p>Danach √∂ffnet ihr das Projekt wieder. Euch sollte auffallen, dass alles in dem Zustand ist, wie ihr das Projekt verlassen habt, z.B. Objekte im Arbeitsbereich, die Befehlshistorie, welche Dateien zur Bearbeitung ge√∂ffnet sind, wo wir uns im Dateisystembrowser befinden, das Arbeitsverzeichnis f√ºr den R-Prozess usw. All dies sind gute Dinge üòÅ.</p>
<p>Nun √§ndert ein paar Dinge an eurem Code. Sinnvoll w√§re z.B. am Anfang die Stichprobenl√§nge <code>n</code> zu definieren und z.B. auf <code>n &lt;- 40</code> setzen. Dann
sollten alle festen 40er Werte durch <code>n</code> ersetzt werden. Anschlie√üend kann man noch ein paar andere Dinge √§ndern, z.B. die Steigung <code>b</code>, die Farbe der Linie ‚Ä¶ was auch immer. Danach k√∂nnt ihr die verschiedenen M√∂glichkeiten ausprobieren, wie ihr den Code erneut ausf√ºhren k√∂nnt:</p>
<ul>
<li><p>Zeile f√ºr Zeile ausf√ºhren, indem ihr entweder das Tastenk√ºrzel <code>Command + Enter</code> oder die Maus (auf ‚ÄúRun‚Äù klicken in der oberen rechten Ecke des Editor-Fensters) verwendet.</p></li>
<li><p>Das gesamte Dokument durchlaufen lassen, entweder per Tastenk√ºrzel <code>Shift + Command +S</code> oder Maus (klicken auf ‚ÄúSource‚Äù in der oberen rechten Ecke des Editor-Fensters).</p></li>
</ul>
<p>Anschlie√üend k√∂nnt ihr euch das PDF anschauen und die √Ñnderungen bewundern.</p>
<p>Irgendwann werdet ihr (vielleicht) vor der Aufgabe stehen, eine Grafik neu zu gestalten oder einfach nur verstehen zu wollen, woher sie stammt. Wenn ihr (relevante) Grafiken in einer Datei speichert (<em>√ºber R Code und niemals √ºber die Maus oder die Zwischenablage</em>) und dabei sinnvolle Dateinamen/Speicherorte (innerhalb des zugeh√∂rigen Projekts) benutzt, werden euch solche Aufgaben nie vor gro√üe Probleme stellen ‚úÖ.</p>
</div>
<div id="zu-guter-letzt" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> zu guter Letzt<a class="anchor" aria-label="anchor" href="#zu-guter-letzt"><i class="fas fa-link"></i></a>
</h2>
<p>Es ist √ºblich, R-Skripte mit einem <code>.R</code> oder <code>.r</code> Suffix zu speichern. Befolgt diese Konvention, au√üer ihr habt einen sehr au√üergew√∂hnlichen Grund, es nicht zu tun.</p>
<p>Kommentare beginnen mit einem oder mehreren <code>#</code>-Symbolen. Verwendet Kommentare. RStudio hilft dir dabei ausgew√§hlte Zeilen mit <code>Ctrl+Shift+C</code> (Windows und Linux) oder <code>command+Shif+C</code> (Mac) zu kommentieren oder vorhandene Kommentare wieder zu entfernen.</p>
<p>Dieser <strong>Workflow</strong> wird euch in Zukunft gute Dienste leisten:</p>
<div class="content-box-green">
<ul>
<li>erstelle ein RStudio Projekt f√ºr jedes neue R ‚ÄúVorhaben‚Äù</li>
<li>speichere alle Input Dateien innerhalb des Projekts (wir werden bald √ºber den Import sprechen)</li>
<li>bewahre alle Skripte zu diesem Projekt dort auf; bearbeite sie und f√ºhren sie dort aus</li>
<li>speichere den Output innerhalb des Projekts (wie z.B. das PDF im letzten Beispiel)</li>
</ul>
</div>
<p>Ihr solltet vermeiden die Maus f√ºr Teile des Workflows zu verwenden, wie z.B. das Laden eines Datensatzes oder das Speichern einer Grafik. Das ist sehr wichtig f√ºr die Reproduzierbarkeit und um im Nachhinein feststellen zu k√∂nnen, wie eine numerische Tabelle oder eine PDF-Datei tats√§chlich erzeugt wurde.</p>
<!--Packages: main link-->
<!--Packages: vignettes & CRAN/GitHub links-->
<!--Bookdowns: main link-->
<!--Bookdowns: specific chapters-->
<!--RStudio Cheat Sheets-->
<!--Blog posts, slides, & papers-->
<!--Papers/Books Cited-->
<!--Misc.-->

</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="install.html"><span class="header-section-number">1</span> Installieren von R und RStudio</a></div>
<div class="next"><a href="version-control.html"><span class="header-section-number">3</span> Git, GitHub, and RStudio</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-basics"><span class="header-section-number">2</span> R Basics und Arbeitsabl√§ufe</a></li>
<li><a class="nav-link" href="#ein-paar-grundlagen-f%C3%BCr-das-arbeiten-mit-r"><span class="header-section-number">2.1</span> Ein paar Grundlagen f√ºr das Arbeiten mit R</a></li>
<li>
<a class="nav-link" href="#workspace-und-working-directory"><span class="header-section-number">2.2</span> Workspace und working directory</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#workspace-.rdata"><span class="header-section-number">2.2.1</span> Workspace, .RData</a></li>
<li><a class="nav-link" href="#working-directory"><span class="header-section-number">2.2.2</span> Working directory</a></li>
</ul>
</li>
<li><a class="nav-link" href="#rprojs"><span class="header-section-number">2.3</span> RStudio Projects</a></li>
<li><a class="nav-link" href="#zu-guter-letzt"><span class="header-section-number">2.4</span> zu guter Letzt</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R4ews MA0009</strong>" was written by Stephan Haug. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
