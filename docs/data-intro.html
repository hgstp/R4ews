<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Kapitel 5 Letzte Vorbereitungen … | R4ews MA0009</title>
<meta name="author" content="Stephan Haug">
<meta name="description" content="Jetzt ist es an der Zeit, sich zu vergewissern in welchem Verzeichnis ihr auf eurem Computer ihr euch befindet. Falls ihr ein RStudio Projekt nutzt, sollte diese Frage leicht zu beantworten sein....">
<meta name="generator" content="bookdown 0.41 with bs4_book()">
<meta property="og:title" content="Kapitel 5 Letzte Vorbereitungen … | R4ews MA0009">
<meta property="og:type" content="book">
<meta property="og:description" content="Jetzt ist es an der Zeit, sich zu vergewissern in welchem Verzeichnis ihr auf eurem Computer ihr euch befindet. Falls ihr ein RStudio Projekt nutzt, sollte diese Frage leicht zu beantworten sein....">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kapitel 5 Letzte Vorbereitungen … | R4ews MA0009">
<meta name="twitter:description" content="Jetzt ist es an der Zeit, sich zu vergewissern in welchem Verzeichnis ihr auf eurem Computer ihr euch befindet. Falls ihr ein RStudio Projekt nutzt, sollte diese Frage leicht zu beantworten sein....">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Lato-0.4.9/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.8.0/transition.js"></script><script src="libs/bs3compat-0.8.0/tabs.js"></script><script src="libs/bs3compat-0.8.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="anchor-links.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-68219208-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-68219208-1');
      </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
          margin-bottom: 0em;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="r4ews.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R4ews MA0009</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">R4ews</a></li>
<li class="book-part">R, wie fange ich an</li>
<li><a class="" href="install.html"><span class="header-section-number">1</span> Installieren von R und RStudio</a></li>
<li><a class="" href="r-basics.html"><span class="header-section-number">2</span> R Basics und Arbeitsabläufe</a></li>
<li class="book-part">Versionskontrolle und R Markdown</li>
<li><a class="" href="version-control.html"><span class="header-section-number">3</span> Git, GitHub, and RStudio</a></li>
<li><a class="" href="r-markdown.html"><span class="header-section-number">4</span> R Markdown</a></li>
<li class="book-part">Datenanalyse Intro</li>
<li><a class="active" href="data-intro.html"><span class="header-section-number">5</span> Letzte Vorbereitungen …</a></li>
<li><a class="" href="dplyr-intro.html"><span class="header-section-number">6</span> Einführung in dplyr</a></li>
<li><a class="" href="dplyr-single.html"><span class="header-section-number">7</span> Mehr zu dplyr</a></li>
<li><a class="" href="import-export.html"><span class="header-section-number">8</span> Daten I/O</a></li>
<li><a class="" href="tidy.html"><span class="header-section-number">9</span> tidy was?</a></li>
<li class="book-part">ggplot2 Intro</li>
<li><a class="" href="einfuehrung-ggplot2.html"><span class="header-section-number">10</span> Einführung</a></li>
<li><a class="" href="bausteine.html"><span class="header-section-number">11</span> Bausteine</a></li>
<li class="book-part">Wir schreiben ein Paket</li>
<li><a class="" href="pakete.html"><span class="header-section-number">12</span> Pakete</a></li>
<li class="book-part">Ein bisschen Statistik</li>
<li><a class="" href="sampling.html"><span class="header-section-number">13</span> Sampling</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="funktionen.html"><span class="header-section-number">14</span> Funktionen</a></li>
<li><a class="" href="envscop.html"><span class="header-section-number">15</span> Environments und Scoping</a></li>
<li><a class="" href="literatur-3.html">Literatur</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-intro" class="section level1" number="5">
<h1>
<span class="header-section-number">Kapitel 5</span> Letzte Vorbereitungen …<a class="anchor" aria-label="anchor" href="#data-intro"><i class="fas fa-link"></i></a>
</h1>
<p>Jetzt ist es an der Zeit, sich zu vergewissern in welchem Verzeichnis ihr auf eurem Computer ihr euch befindet. Falls ihr ein <a href="r-basics.html#rprojs">RStudio Projekt</a> nutzt, sollte diese Frage leicht zu beantworten sein. Falls ihr trotzdem unsicher seid, gebt <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> in der Konsole ein, um das aktuelle Arbeitsverzeichnis zu sehen.</p>
<p>Alle nachfolgenden Code Beispiele wollen wir in einer <code>.R</code> Datei abspeichern, die dann im aktuellen Arbeitsverzeichnis gespeichert werden soll. Idealerweise geben wir dieser Datei noch einen Namen, wie etwa <code>datenanalyse_teil_1.R</code>, der uns schon viel über den möglichen Inhalt erzählt.
Alternativ können wir alle Befehle natürlich auch in eine R Markdown Datei schreiben, siehe <a href="r-markdown.html#r-markdown">Test drive R Markdown</a>.</p>
<p>Prinzipiell geht es in den folgenden Abschnitten um Datenmanagement. Es werden aber auch immer wieder ein paar Grafiken zu sehen sein. Dies ist aber kein Problem, da ihr ja bereits den Data Visualization Basics Primer.</p>
<div class="inline-figure"><img src="img/data_vis_basics.png" width="100%" style="display: block; margin: auto;"></div>
<p>besucht habt und somit den nötigen Background besitzt.</p>
<div id="data-frames-sind-fantastisch" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Data frames sind fantastisch<a class="anchor" aria-label="anchor" href="#data-frames-sind-fantastisch"><i class="fas fa-link"></i></a>
</h2>
<p>Das Standardformat für Daten ist ein data frame. Die meisten Funktionen zur Inferenz, Modellierung und graphischen Darstellung erwarten, dass ihnen über ein <code>data =</code> Argument ein data frame übergeben wird. Dies gilt für Funktion aus der R Basisdistribution schon seit langem.</p>
<p>Die als <a href="https://tidyverse.tidyverse.org">tidyverse</a> bekannte Kollektion von Paketen geht noch einen Schritt weiter und priorisiert ausdrücklich die Verarbeitung von data frames. Tatsächlich priorisiert <a href="https://tidyverse.tidyverse.org">tidyverse</a> eine besondere Art von data frames, die als “tibble” bezeichnet wird.</p>
<p>Data frames - im Gegensatz zu allgemeinen Arrays oder speziell Matrizen - können Variablen unterschiedlicher Typen enthalten, wie z.B. Textdaten (Subjekt-ID oder Name), quantitative Daten (Anzahl der weißen Blutkörperchen) und qualitative/kategoriale Informationen (behandelt vs. unbehandelt). Genauer gesagt können in data frames unterschiedliche Spalten aus unterschiedlichen Datentypen bestehen. Innerhalb einer Spalte müssen aber alle Einträge vom gleichen Typ sein.</p>
<p>Daten aus einer Datenanalyse bestehen immer aus mehr als einem Datentyp. Aus diesem Grund eigenen sich Matrizen oder Arrays nicht zur Datenanalyse, da man sonst mit verschiedenen, unverbundenen Objekten (Matrizen, Arrays) arbeiten müsste und diese nur schwer koordinieren kann.</p>
</div>
<div id="gapminder-data" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> Gapminder data<a class="anchor" aria-label="anchor" href="#gapminder-data"><i class="fas fa-link"></i></a>
</h2>
<p>Wir werden mit einem Teil der Daten aus dem <a href="https://www.gapminder.org">Gapminder-Projekt</a></p>
<div class="inline-figure"><img src="img/gapminder.png" width="80%" style="display: block; margin: auto;"></div>
<p>arbeiten. Die Daten sind im <a href="https://github.com/jennybc/gapminder">gapminder</a> Paket enthalten, welches wir über CRAN installieren können:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"gapminder"</span><span class="op">)</span></span></code></pre></div>
<p>Um die Daten zu verwenden, müssen wir das Paket natürlich auch noch laden</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span></span></code></pre></div>
<div class="content-box-black">
<p>Gapminder wurde von Hans, Anna und Ola Rosling gegründet. Auf der Webseite des Projekts findet man nicht nur viel Informatives, sondern auch sehr Unterhaltsames</p>
<iframe src="https://www.youtube.com/embed/Sm5xF-UYgdg" width="80%" height="400px" data-external="1">
</iframe>
<p>Leider ist Hans Rosling bereits 2017 verstorben.</p>
</div>
</div>
<div id="die-gapminder-daten-sind-ein-tibble" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Die <code>gapminder</code> Daten sind ein “tibble”<a class="anchor" aria-label="anchor" href="#die-gapminder-daten-sind-ein-tibble"><i class="fas fa-link"></i></a>
</h2>
<p>Durch das Laden des <code>gapminder</code> Pakets haben wir nun Zugriff auf einen Datenobjekt mit demselben Namen. Schauen wir uns mithilfe der Funktion <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> mal die Struktur dieses Objekts an.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">## tibble [1,704 × 6] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##  $ country  : Factor w/ 142 levels "Afghanistan",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">##  $ continent: Factor w/ 5 levels "Africa","Americas",..: 3 3 3 3 3 3 3 3 3 3 ...</span></span>
<span><span class="co">##  $ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...</span></span>
<span><span class="co">##  $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...</span></span>
<span><span class="co">##  $ pop      : int [1:1704] 8425333 9240934 10267083 11537966 13079460 14880372..</span></span>
<span><span class="co">##  $ gdpPercap: num [1:1704] 779 821 853 836 740 ...</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> liefert eine vernünftige Beschreibung von fast allem, und im schlimmsten Fall kann tatsächlich auch nichts “Schlimmes” passieren. Aus dem Output erkennen wir, dass der Datensatz 1704 Beobachtungen enthält.</p>
<p>Auf der anderen Seite hätten wir durch direkten Aufruf von <code>gapminder</code> den Inhalt auch direkt auf den Bildschirm schreiben können. Aber vielleicht habt ihr schon mal einen größeren Datensatz aufgerufen und zögert nun etwas, da große Datensätze tendenziell einfach die Konsole füllen und nur sehr wenig Einblick bieten.</p>
<p>Tidyverse bietet eine spezielle data frame Variante an: ein <strong>tibble</strong>. <code>gapminder</code> ist ein tibble. Das sieht man auch, wenn man sich die Klasse dieses Objekts anzeigen lässt</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">## [1] "tbl_df"     "tbl"        "data.frame"</span></span></code></pre></div>
<p>Es ist immer noch ein reguläres data frame, aber zusätzlich eben auch ein tibble.</p>
<p>Wenn wir nun <code>gapminder</code> einfach auf den Bildschirm ausgeben, sehen wir, dass die Konsole nicht voll läuft.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span></span>
<span><span class="co">## # A tibble: 1,704 × 6</span></span>
<span><span class="co">##    country     continent  year lifeExp      pop gdpPercap</span></span>
<span><span class="co">##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">##  1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span><span class="co">##  2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span><span class="co">##  3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span><span class="co">##  4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span><span class="co">##  5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span><span class="co">##  6 Afghanistan Asia       1977    38.4 14880372      786.</span></span>
<span><span class="co">##  7 Afghanistan Asia       1982    39.9 12881816      978.</span></span>
<span><span class="co">##  8 Afghanistan Asia       1987    40.8 13867957      852.</span></span>
<span><span class="co">##  9 Afghanistan Asia       1992    41.7 16317921      649.</span></span>
<span><span class="co">## 10 Afghanistan Asia       1997    41.8 22227415      635.</span></span>
<span><span class="co">## # ℹ 1,694 more rows</span></span></code></pre></div>
<p>Dies ist der erste große Vorteil eines <strong>tibbles</strong> gegenüber einem data frame.</p>
<p>Wenn ihr mit einem reinen data frame arbeitet - und dieses Feature gefällt euch - so könnt ihr es mit <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble()</a></code> in ein tibble transformieren.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 150 × 5</span></span>
<span><span class="co">##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  </span></span>
<span><span class="co">##  1          5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">##  2          4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">##  3          4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">##  4          4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">##  5          5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">##  6          5.4         3.9          1.7         0.4 setosa </span></span>
<span><span class="co">##  7          4.6         3.4          1.4         0.3 setosa </span></span>
<span><span class="co">##  8          5           3.4          1.5         0.2 setosa </span></span>
<span><span class="co">##  9          4.4         2.9          1.4         0.2 setosa </span></span>
<span><span class="co">## 10          4.9         3.1          1.5         0.1 setosa </span></span>
<span><span class="co">## # ℹ 140 more rows</span></span></code></pre></div>
<p>Weitere Möglichkeiten, grundlegende Informationen zu einem data frame abzufragen:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">## [1] "country"   "continent" "year"      "lifeExp"   "pop"       "gdpPercap"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">## [1] 6</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">## [1] 6</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">## [1] 1704    6</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">## [1] 1704</span></span></code></pre></div>
<p>Ein bisschen <em>deskriptive Statistik</em> zum Inhalt eines data frames erhält man mit der <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> Funktion:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">##         country        continent        year         lifeExp    </span></span>
<span><span class="co">##  Afghanistan:  12   Africa  :624   Min.   :1952   Min.   :23.6  </span></span>
<span><span class="co">##  Albania    :  12   Americas:300   1st Qu.:1966   1st Qu.:48.2  </span></span>
<span><span class="co">##  Algeria    :  12   Asia    :396   Median :1980   Median :60.7  </span></span>
<span><span class="co">##  Angola     :  12   Europe  :360   Mean   :1980   Mean   :59.5  </span></span>
<span><span class="co">##  Argentina  :  12   Oceania : 24   3rd Qu.:1993   3rd Qu.:70.8  </span></span>
<span><span class="co">##  Australia  :  12                  Max.   :2007   Max.   :82.6  </span></span>
<span><span class="co">##  (Other)    :1632                                               </span></span>
<span><span class="co">##       pop             gdpPercap     </span></span>
<span><span class="co">##  Min.   :6.00e+04   Min.   :   241  </span></span>
<span><span class="co">##  1st Qu.:2.79e+06   1st Qu.:  1202  </span></span>
<span><span class="co">##  Median :7.02e+06   Median :  3532  </span></span>
<span><span class="co">##  Mean   :2.96e+07   Mean   :  7215  </span></span>
<span><span class="co">##  3rd Qu.:1.96e+07   3rd Qu.:  9325  </span></span>
<span><span class="co">##  Max.   :1.32e+09   Max.   :113523  </span></span>
<span><span class="co">## </span></span></code></pre></div>
<div class="content-box-yellow">
<p><strong>Bemerkung:</strong> <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> ist eine generische Funktion. Für eine gegebene Klasse (des Inputs) bestimmt die generische Funktion die passende Methode. Die Funktion <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> besitzt z.B. die folgenden Methoden:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/methods.html">methods</a></span><span class="op">(</span><span class="va">summary</span><span class="op">)</span></span>
<span><span class="co">##  [1] summary.aov                         summary.aovlist*                   </span></span>
<span><span class="co">##  [3] summary.aspell*                     summary.check_packages_in_dir*     </span></span>
<span><span class="co">##  [5] summary.connection                  summary.data.frame                 </span></span>
<span><span class="co">##  [7] summary.Date                        summary.default                    </span></span>
<span><span class="co">##  [9] summary.Duration*                   summary.ecdf*                      </span></span>
<span><span class="co">## [11] summary.factor                      summary.ggplot*                    </span></span>
<span><span class="co">## [13] summary.glm                         summary.hcl_palettes*              </span></span>
<span><span class="co">## [15] summary.infl*                       summary.Interval*                  </span></span>
<span><span class="co">## [17] summary.lm                          summary.loess*                     </span></span>
<span><span class="co">## [19] summary.manova                      summary.matrix                     </span></span>
<span><span class="co">## [21] summary.mlm*                        summary.nls*                       </span></span>
<span><span class="co">## [23] summary.packageStatus*              summary.Period*                    </span></span>
<span><span class="co">## [25] summary.POSIXct                     summary.POSIXlt                    </span></span>
<span><span class="co">## [27] summary.ppr*                        summary.prcomp*                    </span></span>
<span><span class="co">## [29] summary.princomp*                   summary.proc_time                  </span></span>
<span><span class="co">## [31] summary.rlang_error*                summary.rlang_message*             </span></span>
<span><span class="co">## [33] summary.rlang_trace*                summary.rlang_warning*             </span></span>
<span><span class="co">## [35] summary.rlang:::list_of_conditions* summary.srcfile                    </span></span>
<span><span class="co">## [37] summary.srcref                      summary.stepfun                    </span></span>
<span><span class="co">## [39] summary.stl*                        summary.table                      </span></span>
<span><span class="co">## [41] summary.tukeysmooth*                summary.vctrs_sclr*                </span></span>
<span><span class="co">## [43] summary.vctrs_vctr*                 summary.warnings                   </span></span>
<span><span class="co">## see '?methods' for accessing help and source code</span></span></code></pre></div>
</div>
<p>Obwohl wir uns formell noch nicht eingehender mit der Visualisierung beschäftigt haben, ist es wichtig ein paar Grafiken zu erzeugen um einen ersten Eindruck über den Datensatz zu bekommen. Auf der anderen Seite werden die Grafiken aber auch nicht (viel) aufwendiger als die Beispiele im <a href="https://rstudio.cloud/learn/primers/1.1">Visualisation Basics Primer</a>.</p>
<p>Interessant ist z.B. der zeitliche Verlauf der Lebenserwartung</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="05_ltzt-vrbrtng_files/figure-html/unnamed-chunk-14-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>oder der Zusammenhang zwischen dem GDP (<a href="https://de.wikipedia.org/wiki/Bruttoinlandsprodukt">gross domestic product</a>) und der Lebenserwartung</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="05_ltzt-vrbrtng_files/figure-html/unnamed-chunk-15-1.png" width="80%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="05_ltzt-vrbrtng_files/figure-html/unnamed-chunk-15-2.png" width="80%" style="display: block; margin: auto;"></div>
<p>Grafiken dieser Art werden wir zu einem späteren Zeitpunkt noch genauer behandeln. Dann sprechen wir natürlich auch intensiv über deren Inhalt.</p>
<p><br></p>
<p>Wir schauen uns nochmal die Ausgabe von <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> an, um darüber zu sprechen, was ein data frame genau ist.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">## tibble [1,704 × 6] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##  $ country  : Factor w/ 142 levels "Afghanistan",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">##  $ continent: Factor w/ 5 levels "Africa","Americas",..: 3 3 3 3 3 3 3 3 3 3 ...</span></span>
<span><span class="co">##  $ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...</span></span>
<span><span class="co">##  $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...</span></span>
<span><span class="co">##  $ pop      : int [1:1704] 8425333 9240934 10267083 11537966 13079460 14880372..</span></span>
<span><span class="co">##  $ gdpPercap: num [1:1704] 779 821 853 836 740 ...</span></span></code></pre></div>
<p>Ein data frame ist ein Sonderfall einer <strong>Liste</strong>. R verwendet Listen um so gut wie alles in ein Objekt aufnehmen zu können. Data frames sind nun ein Spezialfall einer Liste, bei dem die Länge jedes Listenelements gleich ist.</p>
<p>Nehmen wir mal an, dass wir eine Beschreibung der Variablen</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">## [1] "country"   "continent" "year"      "lifeExp"   "pop"       "gdpPercap"</span></span></code></pre></div>
<p>zusammen mit den Daten abspeichern wollen. Dazu könnten wir ein tibble</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">desc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>,</span>
<span>               desc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"factor with 142 levels"</span>, <span class="st">"factor with 5 levels"</span>,</span>
<span>                        <span class="st">"ranges from 1952 to 2007 in increments of 5 years"</span>,</span>
<span>                        <span class="st">"life expectancy at birth, in years"</span>,</span>
<span>                        <span class="st">"population"</span>,<span class="st">"GDP per capita (US$, inflation-adjusted)"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 6 × 2</span></span>
<span><span class="co">##   variables desc                                             </span></span>
<span><span class="co">##   &lt;chr&gt;     &lt;chr&gt;                                            </span></span>
<span><span class="co">## 1 country   factor with 142 levels                           </span></span>
<span><span class="co">## 2 continent factor with 5 levels                             </span></span>
<span><span class="co">## 3 year      ranges from 1952 to 2007 in increments of 5 years</span></span>
<span><span class="co">## 4 lifeExp   life expectancy at birth, in years               </span></span>
<span><span class="co">## 5 pop       population                                       </span></span>
<span><span class="co">## 6 gdpPercap GDP per capita (US$, inflation-adjusted)</span></span></code></pre></div>
<p>erzeugen, das die Beschreibungen enthält. Dieses data frame hat nun 6 Zeilen und 2 Spalten. Trotzdem können wir es mit <code>gapminder</code> kombinieren, wenn wir beide tibbles in einer Liste abspeichern</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder_desc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">desc</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">gapminder_desc</span><span class="op">)</span></span>
<span><span class="co">## List of 2</span></span>
<span><span class="co">##  $ : tibble [1,704 × 6] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##   ..$ country  : Factor w/ 142 levels "Afghanistan",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">##   ..$ continent: Factor w/ 5 levels "Africa","Americas",..: 3 3 3 3 3 3 3 3 3 ..</span></span>
<span><span class="co">##   ..$ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 199..</span></span>
<span><span class="co">##   ..$ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...</span></span>
<span><span class="co">##   ..$ pop      : int [1:1704] 8425333 9240934 10267083 11537966 13079460 14880..</span></span>
<span><span class="co">##   ..$ gdpPercap: num [1:1704] 779 821 853 836 740 ...</span></span>
<span><span class="co">##  $ : tibble [6 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##   ..$ variables: chr [1:6] "country" "continent" "year" "lifeExp" ...</span></span>
<span><span class="co">##   ..$ desc     : chr [1:6] "factor with 142 levels" "factor with 5 levels" "r"..</span></span></code></pre></div>
</div>
<div id="variablen-in-einem-data-frame" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> Variablen in einem data frame<a class="anchor" aria-label="anchor" href="#variablen-in-einem-data-frame"><i class="fas fa-link"></i></a>
</h2>
<p>Einzelne Variable in einem data frame kann man mit dem Dollarzeichen <code>$</code> ansprechen. Als Beispiel schauen wir uns die numerische Variable <code>lifeExp</code> genauer an.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">lifeExp</span><span class="op">)</span></span>
<span><span class="co">## [1] 28.8 30.3 32.0 34.0 36.1 38.4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">lifeExp</span><span class="op">)</span></span>
<span><span class="co">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">##    23.6    48.2    60.7    59.5    70.8    82.6</span></span></code></pre></div>
<p>Die <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> Funktion berechnet, neben dem empirischen Mittel, das <a href="https://en.wikipedia.org/wiki/Five-number_summary">Five-number summary</a>, bestehend aus</p>
<ol style="list-style-type: decimal">
<li><p>dem Minimum</p></li>
<li><p>dem unteren Quartil (das empirische <a href="https://de.wikipedia.org/wiki/Empirisches_Quantil#Quartil">0.25 Quantil</a>)</p></li>
<li><p>dem <a href="https://de.wikipedia.org/wiki/Median">Median</a></p></li>
<li><p>dem oberen Quartil (das empirische <a href="https://de.wikipedia.org/wiki/Empirisches_Quantil#Quartil">0.75 Quantil</a>)</p></li>
<li><p>dem Maximum</p></li>
</ol>
<p>Zusätzlich wollen wir noch die Verteilung von <code>lifeExp</code> visualisieren und plotten dazu ein Histogramm. Dazu verwenden wir wieder <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>.</p>
<p>Beachtet, dass ihr innerhalb der <code>ggplot2</code> Funktionen Variablen eines data frames direkt ansprechen könnt. Es ist hier also nicht nötig mit dem <code>$</code> Operator zu arbeiten.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></span></code></pre></div>
<div class="inline-figure"><img src="05_ltzt-vrbrtng_files/figure-html/unnamed-chunk-20-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Alternativ können wir die Einträge eines data frames aber auch über die eckigen Klammern <code>[]</code> indizieren.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">[</span>,<span class="st">"lifeExp"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">##     lifeExp    </span></span>
<span><span class="co">##  Min.   :23.6  </span></span>
<span><span class="co">##  1st Qu.:48.2  </span></span>
<span><span class="co">##  Median :60.7  </span></span>
<span><span class="co">##  Mean   :59.5  </span></span>
<span><span class="co">##  3rd Qu.:70.8  </span></span>
<span><span class="co">##  Max.   :82.6</span></span></code></pre></div>
<p>Dabei spezifiziert der Eintrag links vom Komma die Zeilen und der Wert rechts davon die Spalten. Dies ist hilfreich, wenn man auf einzelne Werte zugreifen will. Aber beim Aufruf nur einer Variable (Spalte), ist die <code>$</code> Notation sicherlich vorteilhafter.</p>
<p>Die Variable <code>year</code> ist eine ganzzahlige Variable, aber da es so wenige unterschiedliche Werte gibt, funktioniert sie auch ein wenig wie eine kategoriale Variable und es macht Sinn die Häufigkeit der einzelnen Ausprägungen zu zählen.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="co">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">##    1952    1966    1980    1980    1993    2007</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 2002 2007 </span></span>
<span><span class="co">##  142  142  142  142  142  142  142  142  142  142  142  142</span></span></code></pre></div>
<p>Wir erkennen, dass in jedem Jahr die gleiche Anzahl an Beobachtungen vorhanden ist. Es handelt sich dabei stets um Beobachtungen aus den gleichen 142 Ländern. Dies erkennt man aus dieser Ausgabe aber natürlich noch nicht.</p>
<p>Die Variablen <code>country</code> und <code>continent</code> enthalten rein kategorische Informationen, die in R (häufig) als <em>factor</em> gespeichert werden.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span></span>
<span><span class="co">## [1] "factor"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span></span>
<span><span class="co">##   Africa Americas     Asia   Europe  Oceania </span></span>
<span><span class="co">##      624      300      396      360       24</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span></span>
<span><span class="co">## [1] "Africa"   "Americas" "Asia"     "Europe"   "Oceania"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nlevels.html">nlevels</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span></span>
<span><span class="co">## [1] 5</span></span></code></pre></div>
<p>Die <strong>Levels</strong> von <code>continent</code> sind <code>"Afrika"</code>, <code>"America"</code> usw., also Beschreibungen, die man gut lesen und verstehen kann. So sollte es sein, wenn man in R eine Faktorvariable aufruft. Im Allgemeinen sind die Levels von Menschen lesbare Zeichenfolgen, wie <code>"male/female"</code> oder <code>"control/treated"</code>.</p>
<p>Euch sollte aber auch klar sein, dass R diese Information in kodierter Form speichert. Als Beispiel könnt ihr euch das Ergebnis von <code>str(gapminder$continent)</code> anschauen</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span></span>
<span><span class="co">##  Factor w/ 5 levels "Africa","Americas",..: 3 3 3 3 3 3 3 3 3 3 ...</span></span></code></pre></div>
<p>Faktorvariablen haben Vor- und Nachteil. Im weiteren Verlauf zeigen wir sowohl die Vor- wie auch die Nachteile. Generell ist aber durchaus so, dass die Vorteile überwiegen.</p>
<p>Als Nächstes erstellen wir mit der Funktion <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> eine Häufigkeitstabelle für die Variable <code>count</code>. Die berechneten Werte wollen wir anschließend noch mithilfe der Funktion <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> visualisieren. Die zu plottenden Häufigkeiten müssen dabei aber nicht an die Funktion <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> übergeben werden. Die Funktion berechnet selbst (über die statistische Transformation <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">stat_count()</a></code>) die entsprechenden Werte.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Africa Americas     Asia   Europe  Oceania </span></span>
<span><span class="co">##      624      300      396      360       24</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="05_ltzt-vrbrtng_files/figure-html/tabulate-continent-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>In den folgenden Abbildungen sehen wir, wie die kodierten Zahlenwerte einer Faktor Variable genutzt werden können. Der <code>continent</code>-Faktor lässt sich im <a href="https://ggplot2.tidyverse.org">ggplot2</a>-Paket leicht in “Facetten” oder Farben abbilden.</p>
<div class="content-box-orange">
<p>Die Erstellung von Grafiken mit ggplot2 werden wir noch genauer besprechen. Daher könnt ihr euch also ruhig zurücklehnen und die Plots einfach genießen oder blind kopieren/einfügen.</p>
</div>
<p>Zunächst initialisieren wir eine Grafik ohne Inhalt, da nicht gesagt wird, wie die Daten geplottet werden sollen.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gapminder</span>, </span>
<span>                   <span class="va">continent</span> <span class="op">!=</span> <span class="st">"Oceania"</span><span class="op">)</span>, <span class="co"># Daten aus Oceania werden "herausgefiltert"</span></span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span>  </span></code></pre></div>
<p>Für die x-Achse wählen wir im nächsten Schritt eine log Skala (zur Basis 10).</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span><span class="op">)</span> </span></code></pre></div>
<p>Zum Grafikobjekt <code>p</code> werden nun weitere Komponenten hinzugefügt und dann jeweils geplottet</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># einen scatterplot</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="co"># mit verschiedenen farben für die verschiedenen kontinente</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span>  </span>
<span><span class="co"># punkte mit transparenz</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">3</span>, se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># einen geglätteten zusammenhang</span></span>
<span><span class="co">## `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span></span>
<span><span class="co"># für jeden kontinent einen eigenen plot (innerhalb einer grafik) erzeugen</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">continent</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">1.5</span>, se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">## `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span></code></pre></div>
<p><img src="05_ltzt-vrbrtng_files/figure-html/factors-nice-for-plots-1.png" width="49%"><img src="05_ltzt-vrbrtng_files/figure-html/factors-nice-for-plots-2.png" width="49%"><img src="05_ltzt-vrbrtng_files/figure-html/factors-nice-for-plots-3.png" width="49%"><img src="05_ltzt-vrbrtng_files/figure-html/factors-nice-for-plots-4.png" width="49%"></p>
</div>
<div id="aufgabe-1" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> Aufgabe<a class="anchor" aria-label="anchor" href="#aufgabe-1"><i class="fas fa-link"></i></a>
</h2>
<p>Im nächsten Abschnitt starten wir mit dem <code>dplyr</code> Paket. Bearbeitet daher zur Vorbereitung die ersten beiden Abschnitte des <em>Work with Data</em></p>
<p><em>Working with Tibbbles</em> zeigt die Verwendung von Tibbles sowie die Verwaltung von <code>tidyverse</code>-Paketen.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">learnr</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/learnr/reference/run_tutorial.html">run_tutorial</a></span><span class="op">(</span><span class="st">"tibbles"</span>, package <span class="op">=</span> <span class="st">"idsst.rtutorials"</span><span class="op">)</span></span></code></pre></div>
<p><em>Isolating Data with dplyr</em> zeigt wie ihr Variablen auswählt, Beobachtungen filtert und Werte neu anordnet. Zudem wird der Pipe-Operator von R, <code>|&gt;</code>, eingeführt.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">learnr</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/learnr/reference/run_tutorial.html">run_tutorial</a></span><span class="op">(</span><span class="st">"isolating"</span>, package <span class="op">=</span> <span class="st">"idsst.rtutorials"</span><span class="op">)</span></span></code></pre></div>
<!--Packages: main link-->
<!--Packages: vignettes & CRAN/GitHub links-->
<!--Bookdowns: main link-->
<!--Bookdowns: specific chapters-->
<!--RStudio Cheat Sheets-->
<!--Blog posts, slides, & papers-->
<!--Papers/Books Cited-->
<!--Misc.-->

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="r-markdown.html"><span class="header-section-number">4</span> R Markdown</a></div>
<div class="next"><a href="dplyr-intro.html"><span class="header-section-number">6</span> Einführung in dplyr</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-intro"><span class="header-section-number">5</span> Letzte Vorbereitungen …</a></li>
<li><a class="nav-link" href="#data-frames-sind-fantastisch"><span class="header-section-number">5.1</span> Data frames sind fantastisch</a></li>
<li><a class="nav-link" href="#gapminder-data"><span class="header-section-number">5.2</span> Gapminder data</a></li>
<li><a class="nav-link" href="#die-gapminder-daten-sind-ein-tibble"><span class="header-section-number">5.3</span> Die gapminder Daten sind ein “tibble”</a></li>
<li><a class="nav-link" href="#variablen-in-einem-data-frame"><span class="header-section-number">5.4</span> Variablen in einem data frame</a></li>
<li><a class="nav-link" href="#aufgabe-1"><span class="header-section-number">5.5</span> Aufgabe</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R4ews MA0009</strong>" was written by Stephan Haug. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
